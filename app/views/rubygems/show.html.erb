<% @title = @rubygem.name %>
<% @subtitle = @latest_version.try(:slug) %>

<% if @rubygem.versions_count.zero? %>
  <p>
    This gem is not currently hosted on Gemcutter.
  </p>
<% else %>

  <div id="admin">
    <%= link_to t(:'.edit'), edit_rubygem_path(@rubygem), :id => "edit" if @rubygem.owned_by?(current_user) %>
    <%= subscribe_link(@rubygem) %>
    <%= unsubscribe_link(@rubygem) %>
    <%= download_link(@latest_version) %>
  </div>

  <div id="markup">
    <%= simple_markup(@latest_version.info) %>
  </div>

  <div class="border">
    <%= clippy(@latest_version.to_install) %>
    <div class="install">
      <div class="instructions"><strong><%= t(:".install") %></strong><span><%= @latest_version.to_install %></span></div>
    </div>
  </div>

  <div class="border">
    <div class="meta">
      <div class="top">
        <div class="authors">
          <h5><%= t(:".authors") %></h5>
          <% if @latest_version.authors.present? %>
            <p><%=h @latest_version.authors %></p>
          <% else %>
            <p>N/A</p>
          <% end %>
        </div>

        <div class="downloads">
          <strong><%= number_with_delimiter(@rubygem.downloads) %></strong> <%= t(:".downloads.total") %>
        </div>
        <div class="downloads">
          <strong><%= number_with_delimiter(@latest_version.downloads_count) %></strong> <%= t(:".downloads.this_version") %>
        </div>
      </div>

      <% unless @rubygem.linkset.empty? %>
        <div class="links">
          <h5>Links</h5>
          <%= link_to_page t(:".homepage"), @rubygem.linkset.home %>
          <%= link_to_page t(:".source_code"), @rubygem.linkset.code %>
          <%= link_to_page t(:".documentation"), @rubygem.linkset.docs %>
          <%= link_to_page t(:".wiki"), @rubygem.linkset.wiki %>
          <%= link_to_page t(:".mailing_list"), @rubygem.linkset.mail %>
          <%= link_to_page t(:".bug_tracker"), @rubygem.linkset.bugs %>
        </div>
      <% end %>

      <div class="versions">
        <h5><%= t(:".versions") %></h5>
        <ol>
          <%= render @rubygem.versions.limited(5) %>
        </ol>
        <% if @rubygem.versions_count > 5 %>
          <%= link_to t(:".show_all_versions", :count => rubygem.versions_count), rubygem_versions_url(@rubygem), :class => "more" %>
        <% end %>
      </div>

      <%= render :partial => "rubygems/dependencies", :locals => { :dependencies => @latest_version.dependencies.runtime } %>
      <%= render :partial => "rubygems/dependencies", :locals => { :dependencies => @latest_version.dependencies.development } %>
    </div>
  </div>
<% end %>
