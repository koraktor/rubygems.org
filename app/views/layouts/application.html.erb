<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="fluid-icon" href="/apple-touch-icon.png"/>
    <link rel="search" type="application/opensearchdescription+xml" title="gemcutter" href="/opensearch.xml">
    <%= stylesheet_link_tag "reset", "960", "screen", "humanmsg", :cache => true %>
    <!--[if IE 7]>
      <%= stylesheet_link_tag "ie7" %>
    <![endif]-->
    <%= render "layouts/feeds" %>
    <title><%= page_title %></title>
  </head>
  <body>
    <% flash.each do |name, msg| %>
      <div id="flash_<%= name %>"><%= msg %></div>
    <% end %>
    <div class="container_12">
      <div class="prefix_1 grid_3 header">
        <h1><%= link_to "Gemcutter", root_url, :title => t(:'.home') %></h1>
      </div>
      <div class="grid_7 suffix_1 nav">
        <ul>
          <% if signed_in? %>
            <li><%= link_to(image_tag(current_user.gravatar_url(:size => 24)), profile_url, :id => "user_gravatar") %></li>
            <li><%= link_to truncate(current_user.name), profile_url %></li>
          <% end %>
          <li><%= link_to t(:all_gems), rubygems_url %></li>
          <% if signed_in? %>
            <li><%= link_to t(:'.dashboard'), dashboard_url %></li>
            <li><%= link_to t(:'.logout'), sign_out_path %></li>
          <% else %>
            <li><%= link_to t(:sign_in), sign_in_path %></li>
            <li><%= link_to t(:sign_up), sign_up_path %></li>
          <% end %>
        </ul>
        <% form_tag search_url, :method => :get do %>
          <div class="text_field">
            <%= text_field_tag :query, params[:query] ? h(params[:query]) : t(:'.search_gems') %>
          </div>
          <%= submit_tag t(:search), :id => 'search_submit', :name => nil %>
        <% end %>
      </div>
      <div class="prefix_1 grid_10 suffix_1 main">
        <% if content_for?(:fold) %>
          <div class="fold">
            <%= yield :fold %>
          </div>
        <% end %>
        <div class="info">
          <% if @title %>
            <h2><%= link_to @title, "" %></h2>
          <% end %>
          <% if @subtitle %>
            <h3><%= @subtitle %></h3>
          <% end %>
          <%= yield %>
        </div>
      </div>
      <div class="prefix_1 grid_10 suffix_1 footer">
        <div class="links">
          <%= link_to "About", page_url("about") %>
          <%= link_to "Blog", "http://update.gemcutter.org" %>
          <%= link_to "Docs", page_url("docs") %>
          <%= link_to "Help", "http://help.rubygems.org" %>
          <%= link_to "Status", "http://twitter.com/rubygemcutter" %>
          <%= link_to "Code", "http://github.com/qrush/gemcutter" %>
          <%= link_to "Discuss", "http://groups.google.com/group/gemcutter" %>
          <%= link_to "Stats", statistics_url %>
          <%= link_to "#{t(:'.designed_by')} #{image_tag('thoughtbot.png')}", "http://thoughtbot.com", :title => "Designed by Thoughtbot", :id => "thoughtbot" %>
          <%= link_to "#{t(:'.supported_by')} #{image_tag('rubycentral.png')}", "http://rubycentral.org", :title => "Supported by Ruby Central", :id => "rubycentral" %>
        </div>
      </div>
    </div>
    <%= javascript_include_tag "jquery", "jquery.easing.1.3", "humanmsg", "application", :cache => true %>
    <script type="text/javascript">
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
    try {
    var pageTracker = _gat._getTracker("UA-10315684-1");
    pageTracker._trackPageview();
    } catch(err) {}</script>
  </body>
</html>
